<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<item>
<title>[COLOR orange]PELIS 70/80/90[/COLOR]</title>
<link>$doregex[makelist]</link>
 
<regex>
  <name>makelist</name>
  <listrepeat><![CDATA[
        <title>[COLOR white]+- [/COLOR][COLOR yellow][makelist.param2][/COLOR]</title>
        <link>$doregex[getUrl]</link>
        <thumbnail>http://3.bp.blogspot.com/-3DwEJuYF22w/T77NLk8b7hI/AAAAAAAAKvM/so2hysJzem4/s1600/videos+marciales.jpg</thumbnail>
        <fanart>http://www.netambulo.com/wp-content/uploads/2017/05/15-mejores-escenas-peliculas-de-los-80.jpg</fanart>
]]></listrepeat>
<expres><![CDATA[class="name[\w\W\s]{0,35}href="(.*?)"[\w\W\s]{0,50}preview">(.*?)<]]></expres>
<page>http://diskokosmiko.mx/picos/708090-111971/list,1,10</page>
<cookieJar></cookieJar>
</regex>
 
<regex><name>getUrl</name>
<expres><![CDATA[#$pyFunction
import re , requests ,json
def GetLSProData(page_data,Cookie_Jar,m):
 
 ref = 'http://diskokosmiko.mx/'
 url='http://diskokosmiko.mx[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0', 'Referer': ref ,
            'X-Requested-With' : 'XMLHttpRequest' , 'Accept' : '*/*'}
 session = requests.Session()
 r = session.get(url, headers=headers)
 rv1 = r.cookies
 
 vfile , vtoken = re.findall('action/DownloadFile.*?fileId.*?value="(.*?)".*?Token".*?value="(.*?)"', r.text)[0]
 data_a ={'fileId': vfile , '__RequestVerificationToken': vtoken}
 nr = requests.post('http://diskokosmiko.mx/action/DownloadFile?location=fi&f=%s'%vfile , headers=headers,cookies=rv1 , data=data_a).text
 nrj=json.loads(nr)
 nr = nrj['Content']
 r2 = re.findall(r'(?s)value=\"(.*?)\"', nr)[0]
 data_a ={'__RequestVerificationToken': r2 , 'Username': 'retrogames33' , 'Password' : 'retrogames'}
 nr1 = requests.post('http://diskokosmiko.mx/action/Account/Login', headers=headers,cookies = rv1 , data=data_a)
 print nr1.headers['Set-Cookie']
 rasp = re.findall('ASPXAUTH_v2=(.*?);', nr1.headers['Set-Cookie'])[0]
 rv1['.ASPXAUTH_v2'] = rasp
 data_a ={'fileId': vfile , '__RequestVerificationToken': vtoken}
 nr3 = requests.post('http://diskokosmiko.mx/action/DownloadFile?location=fi&f=%s'%vfile , headers=headers, cookies = rv1 , data=data_a).text
 r3 = re.findall('DownloadUrl":"(.*?)"', nr3)[0]
 print r3
 return r3
]]></expres>
<page></page>
<cookieJar></cookieJar>
</regex>
<thumbnail>http://3.bp.blogspot.com/-3DwEJuYF22w/T77NLk8b7hI/AAAAAAAAKvM/so2hysJzem4/s1600/videos+marciales.jpg</thumbnail>
<fanart>http://www.netambulo.com/wp-content/uploads/2017/05/15-mejores-escenas-peliculas-de-los-80.jpg</fanart>
</item>

<item>
<title>[COLOR orange]70 PELICULAS[/COLOR]</title>
<link>$doregex[makelist]</link>
 
<regex>
  <name>makelist</name>
  <listrepeat><![CDATA[
        <title>[COLOR white]+- [/COLOR][COLOR yellow][makelist.param2][/COLOR]</title>
        <link>$doregex[getUrl]</link>
        <thumbnail>http://3.bp.blogspot.com/-3DwEJuYF22w/T77NLk8b7hI/AAAAAAAAKvM/so2hysJzem4/s1600/videos+marciales.jpg</thumbnail>
        <fanart>http://www.netambulo.com/wp-content/uploads/2017/05/15-mejores-escenas-peliculas-de-los-80.jpg</fanart>
]]></listrepeat>
<expres><![CDATA[class="name[\w\W\s]{0,35}href="(.*?)"[\w\W\s]{0,50}preview">(.*?)<]]></expres>
<page>http://diskokosmiko.mx/INTERALIOS/peliculas-4976/list,1,3</page>
<cookieJar></cookieJar>
</regex>
 
<regex><name>getUrl</name>
<expres><![CDATA[#$pyFunction
import re , requests ,json
def GetLSProData(page_data,Cookie_Jar,m):
 
 ref = 'http://diskokosmiko.mx/'
 url='http://diskokosmiko.mx[makelist.param1]'
 headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0 Iceweasel/42.0', 'Referer': ref ,
            'X-Requested-With' : 'XMLHttpRequest' , 'Accept' : '*/*'}
 session = requests.Session()
 r = session.get(url, headers=headers)
 rv1 = r.cookies
 
 vfile , vtoken = re.findall('action/DownloadFile.*?fileId.*?value="(.*?)".*?Token".*?value="(.*?)"', r.text)[0]
 data_a ={'fileId': vfile , '__RequestVerificationToken': vtoken}
 nr = requests.post('http://diskokosmiko.mx/action/DownloadFile?location=fi&f=%s'%vfile , headers=headers,cookies=rv1 , data=data_a).text
 nrj=json.loads(nr)
 nr = nrj['Content']
 r2 = re.findall(r'(?s)value=\"(.*?)\"', nr)[0]
 data_a ={'__RequestVerificationToken': r2 , 'Username': 'retrogames33' , 'Password' : 'retrogames'}
 nr1 = requests.post('http://diskokosmiko.mx/action/Account/Login', headers=headers,cookies = rv1 , data=data_a)
 print nr1.headers['Set-Cookie']
 rasp = re.findall('ASPXAUTH_v2=(.*?);', nr1.headers['Set-Cookie'])[0]
 rv1['.ASPXAUTH_v2'] = rasp
 data_a ={'fileId': vfile , '__RequestVerificationToken': vtoken}
 nr3 = requests.post('http://diskokosmiko.mx/action/DownloadFile?location=fi&f=%s'%vfile , headers=headers, cookies = rv1 , data=data_a).text
 r3 = re.findall('DownloadUrl":"(.*?)"', nr3)[0]
 print r3
 return r3
]]></expres>
<page></page>
<cookieJar></cookieJar>
</regex>
<thumbnail>http://3.bp.blogspot.com/-3DwEJuYF22w/T77NLk8b7hI/AAAAAAAAKvM/so2hysJzem4/s1600/videos+marciales.jpg</thumbnail>
<fanart>http://www.netambulo.com/wp-content/uploads/2017/05/15-mejores-escenas-peliculas-de-los-80.jpg</fanart>
</item>

<item>
<title>http://dramaonline.com/</title>
<link>$doregex[makelist]</link>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
  <title>[COLOR gold][makelist.param3][/COLOR]</title>
  <link>$doregex[makelist2]</link>
  <thumbnail>[makelist.param2]</thumbnail>
  <fanart>http://dramaonline.com/wp-content/uploads/2017/05/darklogo.png</fanart>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re
def GetLSProData(page_data,Cookie_Jar,m):
  list=re.findall('class="baner-sd">(?s)(.*?)<div',page_data)[0]
  return re.findall('"Icons-sd-a" href="(.*?)(?:#|").*?src="(.*?)".*?p">(.*?)<',list)
]]></expres>
<page>http://dramaonline.com/</page>
</regex>
<regex>
<name>makelist2</name>
<listrepeat><![CDATA[
  <title>[COLOR yellow][makelist2.param2][/COLOR]</title>
  <link>$doregex[makelist3]</link>
  <thumbnail>[makelist2.param3]</thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re
def GetLSProData(page_data,Cookie_Jar,m):
  list=re.findall('class="entry-meta">(?s)(.*?)</table',page_data)[0]
  ltitle=re.findall('(?:p>|td>).*?http://dramaonline.com/category/.*?/([^/]+)/".*?src',list)
  for e in ltitle:
    atitle=e.title()
    list=list.replace(e,atitle)
  return re.findall('(?:p>|td>).*?"(http://dramaonline.com/category/.*?/([^/]+)/)".*?src="(.*?)"',list)
]]></expres>
<page>[makelist.param1]</page>
<referer>http://dramaonline.com/</referer>
<cookieJar></cookieJar>
</regex>
<regex>
<name>makelist3</name>
<listrepeat><![CDATA[
  <title>[COLOR gold][makelist3.param3][/COLOR]</title>
  <link>$doregex[getUrl]</link>
  <thumbnail>[makelist3.param2]</thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
import re
def GetLSProData(page_data,Cookie_Jar,m):
  list=re.findall('class="entry-title">(?s)(.*?)id="footerwidget',page_data)[0]
  return re.findall('"featuredimage".*?href="(.*?)".*?src="(.*?)".*?title="(.*?).{6}"',list)
]]></expres>
<page>[makelist2.param1]</page>
<referer>[makelist.param1]</referer>
<cookieJar></cookieJar>
</regex>
<regex>
<name>getUrl</name>
<expres><![CDATA[#$pyFunction
import re,requests
def GetLSProData(page_data,Cookie_Jar,m):
  source=requests.get('[makelist3.param1]',headers={'Referer':'[makelist2.param1]'}).content.decode('ascii','ignore')
  if 'tune.pk' in source:
     link=re.findall('src="(.*?tune.pk.*?)"',source)[0].replace('#038;','');source=requests.get(link,headers={'Referer':'[makelist3.param1]'}).content.decode('ascii','ignore');url=re.findall('src="(.*?tune.pk.*?)"',source)[0]
     source=requests.get(url,headers={'Referer':link}).content.decode('ascii','ignore');info=re.search('(?s)requestURL.*?[\'"](.*?)[\'"].*?X-Forwarded-For":"(.*?)".*?:"(.*?)"',source)
     source=requests.get(info.group(1),headers={'Referer':url,'X-Forwarded-For':info.group(2),'X-secret-Header':info.group(3)}).content.decode('ascii','ignore');return re.findall('Auto.*?"(h.*?)"',source)[0].replace('\\','')+'|Referer=%s&User-Agent=iPad'%url
  elif 'youtube' in source:
     return 'plugin://plugin.video.youtube/play/?video_id='+re.findall('watch\?v=(.*?)"',source)[0]
]]></expres>
<page></page>
</regex>
<thumbnail>http://dramaonline.com/wp-content/uploads/2017/05/darklogo.png</thumbnail>
<fanart>http://dramaonline.com/wp-content/uploads/2017/05/darklogo.png</fanart>
</item>


